<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="fragments/headInfo :: headInfoFragment"></th:block>
<link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
<style>
.material-symbols-outlined {
  font-variation-settings:
  'FILL' 0,
  'wght' 400,
  'GRAD' 0,
  'opsz' 48
}
body p {
display:block;
}
.word {
    white-space: no-wrap;
    overflow: hidden;
    text-overflow: ellipsis;
<!--    word-wrap: break-word;-->
<!--    text-align: left;-->
<!--    display: -webkit-box;-->
<!--    -webkit-line-clamp: 1;-->
<!--    -webkit-box-orient: vertical;-->
<!--    line-height: 1.2;-->
}


</style>
<script>
function openLoginModal() {
    if (confirm("로그인 후 이용해 주세요.")) {
    window.location.href = "/loginForm?redirectURL=" + encodeURIComponent(window.location.pathname);
    }
}


</script>
<body class="landing is-preload">

<div id="page-wrapper">
    <div th:replace="~{fragments/headerMain :: headerMainFragment('mainPage')}"></div>
    <!-- Banner -->
    <section id="banner">
        <h2 th:text="#{page.title}">독서노트</h2>
        <p>기록의 기억을 믿어보세요</p>

        <div th:if="${#session} == null">
            <form>
                <ul class="actions special">
                    <li><a href="/loginForm" class="button primary">로그인</a></li>
                    <li><a href="#" class="button">회원가입</a></li>
                </ul>
            </form>
        </div>

        <div th:if="${#session} != null">
            <form th:action="@{/logout}" method="post">
                <div class="col-12">
                    <ul class="actions special">
                        <li><input type="submit" value="로그아웃"/></li>
                    </ul>
                </div>
            </form>
        </div>

    </section>

    <!-- Main -->
    <section id="main" class="container">
<!--   [추천도서 리스트 부분]     -->

        <section class="box">
            <div>
                <h4>베스트셀러</h4>
                <hr/>

                <div class="row">
<!--                    <div class="col-6 col-12-narrower" th:each="book : ${bookList}">-->
<!--                    <div class="col-6 gtr-25" th:each="book : ${bookList}">-->
                    <div class="col-6 col-12-narrower" th:each="book : ${bookList}">
                        <a th:href="@{|/book/${book.isbn}|}">
<!--                            <section class="box special" style="background-color:#FFFAF0; padding-top: 0.5em; padding-bottom: 3em;padding-right: 1em;padding-left: 1em;" >-->
                            <section class="box special" style="padding-top: 0.5em; padding-bottom: 3em;padding-right: 0.5em;padding-left: 1em;" >
                                <span class="image left"><img th:src="@{${book.imageUrl}}" alt=""/></span>

                                    <p th:if="${book.title.indexOf('-') == -1}">
                                        <br/>
                                        <b th:text="|[${book.title}]|"></b><br/>
                                        <span th:text="${#strings.substringBefore(book.author,'(')}"
                                              style="color:gray;"></span><br/>
<!--                                        <br/>-->
                                        <!--                                별점이 없을떄-->
                                        <span th:if="${book.avgStarRating == null}" style="color: lightGray;">
                                          <span >★</span>
                                          <span>0.0</span>
                                        </span>

                                        <!--별점이 있을떄-->
                                        <span th:if="${book.avgStarRating != null}" >
                                          <span style="color: #FFD700;">★</span>
                                          <span th:text="${#numbers.formatDecimal(book.avgStarRating,1,1)}"></span>
                                        </span>
                                    </p>

                                <p th:if="${book.title.indexOf('-') != -1}">
                                    <br>
                                    <b th:text="|[${#strings.substringBefore(book.title,'-')}]|"></b><br/>
                                    <span th:text="${#strings.substringBefore(book.author,'(')}"
                                          style="color:gray;"></span><br/>
<!--                                    <br/>-->
                                    <!--                                    별점이 없을떄-->
                                    <span th:if="${book.avgStarRating == null}" style="color: lightGray;">
                                      <span>★</span>
                                      <span>0.0</span>
                                    </span>

                                    <!--별점이 있을떄-->
                                    <span th:if="${book.avgStarRating != null}" >
                                      <span style="color: #FFD700;">★</span>
                                      <span th:text="${#numbers.formatDecimal(book.avgStarRating,1,1)}"></span>
                                    </span>
                                </p>
                            </section>
                        </a>
                    </div>
                </div>
            </div>
        </section>


<!--   [책갈피 리스트 부분]     -->
        <section class="box special">
            <header class="major">

                <div class="inner_content">내용1</div>
                <h2 class="inner_content">Introducing the ultimate mobile app aaaaaaaaaaaaaaaaaaaaaaaaaa
                    <br/>
                    for doing stuff with your phone</h2>
                <p class="inner_content">Blandit varius ut praesent nascetur eu penatibus nisi risus faucibus nunc
                    ornare<br/>
                    adipiscing nunc adipiscing. Condimentum turpis massa.</p>

            </header>
            <span class="image featured"><img src="images/pic01.jpg" alt=""/></span>
        </section>

<!--   [독후감 리스트 부분]     -->
    <!--세션에 로그인 정보가 없경우-->
    <div class="row" th:if="${#session} == null">
        <div class="col-6 col-12-narrower" th:each="reportInfo : ${reportInfoList}">

            <div class="box special">
                <span class="image featured"><img th:src="|image/${reportInfo.storeFileName}|" alt=""/></span>
                <!--                    <h3>Sed lorem adipiscing</h3>-->
                <span style="float:left; color:gray;">
                        <span class="material-symbols-outlined">account_circle</span>
                        작성자 : <span th:text="${reportInfo.writerId}"></span>
                    </span>


                <nav id="nav" style="float:right;">
                    <ul class="actions">
                        <a onclick="openLoginModal()">
                            <li style="float:left;">
                                <span class="material-symbols-outlined" style="color:pink;">favorite</span>
                                <span th:text="${reportInfo.favoriteNum}"></span>
                            </li>
                            <li style="float:left;">
                                <span class="material-symbols-outlined" style="color:pink;">bookmark</span>
                                <span th:text="${reportInfo.collectionNum}"></span>
                            </li>
                            <!--                                <li class="icon solid fa-angle-down" style="float:left;">-->
                            <!--                                    <span class="material-symbols-outlined" style="color:pink;">more_vert</span>-->
                            <!--                                    <ul>-->
                            <!--                                        <li><a onclick="openLoginModal()">저장</a></li>-->
                            <!--                                        <li><a onclick="openLoginModal()">수정</a></li>-->
                            <!--                                        <li><a onclick="openLoginModal()">삭제</a></li>-->
                            <!--                                    </ul>-->
                            <!--                                </li>-->
                        </a>
                    </ul>
                </nav>

                <br/>
                <br/>
                <p align="center" style="font-weight:bold;" th:text="|[${reportInfo.title}]|"></p>
                <span th:if="${#strings.length(reportInfo.content) > 50}">
                    <p th:text="|${#strings.substring(reportInfo.content, 0, 50)} ....|"></p>
                </span>
                <span th:unless="${#strings.length(reportInfo.content) > 50}" >
                    <b th:text="|${reportInfo.content}|" style="word-wrap: break-word;"></b>
                </span>

                <br/>
                <br/>
                <p th:text="${reportInfo.hashTag}"></p>
                <ul class="actions special">
                    <li><a th:href="@{|/bookReportForm/${reportInfo.id}|}" class="button alt">Learn More</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!--세션에 로그인 정보가 있을 경우-->
    <div class="row" th:if="${#session} != null">
        <div class="col-6 col-12-narrower" th:each="reportInfo : ${reportInfoList}">

            <section class="box special">
                <span class="image featured"><img th:src="|image/${reportInfo.storeFileName}|" alt=""/></span>
                <!--                    <h3>Sed lorem adipiscing</h3>-->

                <span style="float:left; color:gray;">
                        <span class="material-symbols-outlined">account_circle</span>
                        작성자 : <span th:text="${reportInfo.writerId}"></span>
                    </span>

                <nav id="nav" style="float:right;" th:each="history : ${historyList}"
                     th:if="${history.reportId}==${reportInfo.id}">
                    <ul class="actions">
                        <a th:href="@{|/feedListForm/${reportInfo.id}/favorite/${history.favorite}|}">
                            <li style="float:left;">
                                    <span th:if="${history.favorite}" class="material-symbols-outlined"
                                          style="color:red;">favorite</span>
                                <span th:unless="${history.favorite}" class="material-symbols-outlined"
                                      style="color:pink;">favorite</span>
                                <span th:text="${reportInfo.favoriteNum}"></span>
                            </li>
                        </a>
                        <a th:href="@{|/feedListForm/${reportInfo.id}/collection/${history.collection}|}">
                            <li style="float:left;">
                                <span th:if="${history.collection}" class="material-symbols-outlined"
                                      style="color:red; ">bookmark</span>
                                <span th:unless="${history.collection}" class="material-symbols-outlined"
                                      style="color:pink;">bookmark</span>
                                <span th:text="${reportInfo.collectionNum}"></span>
                            </li>
                        </a>
                        <!--                            <li class="icon solid fa-angle-down" style="float:left;">-->
                        <!--                                <span class="material-symbols-outlined" style="color:pink;">more_vert</span>-->
                        <!--                                <ul>-->
                        <!--                                    <li><a onclick="openLoginModal()">저장</a></li>-->
                        <!--&lt;!&ndash;                                    <li th:if="${reportInfo.writeId} == ${#session.getAttribute('loginMember').userId}"><a th:href="|/editReportForm/${reportInfo.id}|">수정</a></li>&ndash;&gt;-->
                        <!--                                    <li><a onclick="openLoginModal()">삭제</a></li>-->
                        <!--                                </ul>-->
                        <!--                            </li>-->

                    </ul>
                </nav>

                <br/>
                <br/>
                <p align="center" style="font-weight:bold;" th:text="|[${reportInfo.title}]|"></p>
                <span th:if="${#strings.length(reportInfo.content) > 50}">
                    <p th:text="|${#strings.substring(reportInfo.content, 0, 50)} ....|"></p>
                </span>
                <span th:unless="${#strings.length(reportInfo.content) > 50}" >
                    <b th:text="|${reportInfo.content}|" style="word-wrap: break-word;"></b>
                </span>
                <br/>
                <br/>
                <p th:text="${reportInfo.hashTag}"></p>
                <ul class="actions special">
                    <li><a th:href="@{|/bookReportForm/${reportInfo.id}|}" class="button alt">Learn More</a></li>
                </ul>
            </section>
        </div>
    </div>


    </section>

    <!-- CTA -->
    <section id="cta">

        <h2>Sign up for beta access</h2>
        <p>Blandit varius ut praesent nascetur eu penatibus nisi risus faucibus nunc.</p>

        <form>
            <div class="row gtr-50 gtr-uniform">
                <div class="col-8 col-12-mobilep">
                    <input type="email" name="email" id="email" placeholder="Email Address"/>
                </div>
                <div class="col-4 col-12-mobilep">
                    <input type="submit" value="Sign Up" class="fit"/>
                </div>
            </div>
        </form>

    </section>

    </th:block>
</div>

<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.dropotron.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>
</body>

<th:block th:replace="fragments/footer :: footerFragment"></th:block>

</html>

